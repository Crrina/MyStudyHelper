{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{handleSessionExpired}from\"../utility/SessionExpiryHandler\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function NoteBox(_ref){let{apiUrl}=_ref;const ITEMS_PER_PAGE=\"4\";//4 notes are fetched per page\nlet accessToken=localStorage.getItem('accessToken');const[isSidebarOpen,setIsSidebarOpen]=useState(false);const[sidebarData,setSidebarData]=useState(null);const[isLoading,setIsLoading]=useState(false);const[noteContent,setNoteContent]=useState(localStorage.getItem(\"noteContent\")||'');const[editMode,setEditMode]=useState(JSON.parse(localStorage.getItem(\"editMode\")||\"false\"));const toggleButtonContent=isSidebarOpen?'X':'Get saved notes';const[currentNoteId,setCurrentNoteId]=useState(JSON.parse(localStorage.getItem(\"currentNoteId\"))||null);//for pagiation\nconst[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(0);const displayButton=editMode?'Save Changes':'Save';const navigate=useNavigate();useEffect(()=>{localStorage.setItem(\"noteContent\",noteContent);},[noteContent]);useEffect(()=>{// Save editMode to localStorage as a string\nlocalStorage.setItem(\"editMode\",JSON.stringify(editMode));},[editMode]);useEffect(()=>{localStorage.setItem(\"currentNoteId\",JSON.stringify(currentNoteId));},[currentNoteId]);const handleSubmit=async event=>{event.preventDefault();try{const response=await axios.post(apiUrl+\"/note\",{content:noteContent},{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(accessToken)}});setNoteContent(\"\");if(response.status===200&&isSidebarOpen){await fetchData(currentPage);}}catch(err){if(!(err!==null&&err!==void 0&&err.response)){console.log(\"No Server Response\");}else if((err===null||err===void 0?void 0:err.response.status)===401){console.log(\"Error message: \",err.response.data);handleSessionExpired(navigate);// Handle session expiry\n}else if((err===null||err===void 0?void 0:err.response.status)===403){console.log(\"Bad request\");}else{console.log(\"Failed to access source\");}}};const editSubmit=async event=>{event.preventDefault();try{const response=await axios.put(apiUrl+\"/note/api/\"+currentNoteId,noteContent,{headers:{'Content-Type':'text/plain','Authorization':\"Bearer \".concat(accessToken)}});setNoteContent(\"\");setEditMode(false);if(response.status===200){await fetchData(currentPage);}}catch(err){if(!(err!==null&&err!==void 0&&err.response)){console.log(\"No Server Response\");}else if((err===null||err===void 0?void 0:err.response.status)===401){console.log(\"Error message: \",err.response.data);handleSessionExpired(navigate);// Handle session expiry\n}else if((err===null||err===void 0?void 0:err.response.status)===403){console.log(\"Bad request\");}else{console.log(\"Failed to access source\");}}};const fetchData=async function(){let pageNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;const pageNum=pageNumber-1;setIsLoading(true);try{var _response$data,_response$data2,_response$data3;const response=await axios.get(apiUrl+\"/note\",{params:{page:pageNum,size:ITEMS_PER_PAGE},headers:{'Authorization':\"Bearer \".concat(accessToken)}});setSidebarData((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.notes);setTotalPages((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.totalPages);setCurrentPage(((_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.currentPage)+1);setIsLoading(false);}catch(error){if((error===null||error===void 0?void 0:error.response.status)===401){console.log(\"Error message: \",error.response.data);handleSessionExpired(navigate);// Handle session expiry\n}else{console.error('Error fetching data:',error);setIsLoading(false);}}};//upon page load get the auth token\nuseEffect(()=>{accessToken=localStorage.getItem('accessToken');},[]);const toggleSidebar=()=>{setIsSidebarOpen(!isSidebarOpen);if(!isSidebarOpen){setCurrentPage(1);fetchData().then(()=>{console.log(\"Data fetched successfully after toggling sidebar.\");}).catch(error=>{console.error(\"Error fetching data:\",error);});}};const handlePageClick=pageNumber=>{setCurrentPage(pageNumber);fetchData(pageNumber).then(()=>{console.log(\"Data fetched successfully for page:\",pageNumber);}).catch(error=>{console.error(\"Error fetching data for page:\",pageNumber,error);});};const deleteRequest=async(noteId,event)=>{let answer=window.confirm(\"Are you sure you want to delete the note?\");if(answer){event.preventDefault();try{const response=await axios.delete(apiUrl+\"/note/\"+noteId,{headers:{'Authorization':\"Bearer \".concat(accessToken)}});if(response.status===200){await fetchData(currentPage);}}catch(err){if(!(err!==null&&err!==void 0&&err.response)){console.log(\"No Server Response\");}else if((err===null||err===void 0?void 0:err.response.status)===404){console.log(\"Error message: \",err.response.data);handleSessionExpired(navigate);// Handle session expiry\n}else if((err===null||err===void 0?void 0:err.response.status)===403){console.log(\"Bad request\");}else{console.log(\"Failed to access source\");}}}};// Pagination Component\nconst Pagination=_ref2=>{let{totalPages,currentPage}=_ref2;const maxPageNumbersToShow=3;const pages=[];// calculate the range of page numbers to show\nlet startPage=Math.max(1,currentPage-Math.floor(maxPageNumbersToShow/2));let endPage=Math.min(totalPages,startPage+maxPageNumbersToShow-1);// adjust the start page  at the end of the range\nif(endPage===totalPages){startPage=Math.max(1,endPage-maxPageNumbersToShow+1);}// previous page link\npages.push(/*#__PURE__*/_jsx(\"button\",{className:\"buttonPag\",onClick:()=>handlePageClick(currentPage-1),disabled:currentPage===1,children:\"Previous\"},\"prev\"));// first page link\nif(startPage>1){pages.push(/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();handlePageClick(1);},children:\"1\"},1));if(startPage>2)pages.push(/*#__PURE__*/_jsx(\"span\",{children:\"...\"},\"startEllipsis\"));}// page number links\nfor(let i=startPage;i<=endPage;i++){pages.push(/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"pagination-link \".concat(i===currentPage?'active':''),onClick:e=>{e.preventDefault();handlePageClick(i);},\"aria-current\":i===currentPage?'page':undefined,\"aria-disabled\":i===currentPage?'true':'false',children:i},i));}// last page link\nif(endPage<totalPages){if(endPage<totalPages-1)pages.push(/*#__PURE__*/_jsx(\"span\",{children:\"...\"},\"endEllipsis\"));pages.push(/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();handlePageClick(totalPages);},children:totalPages},totalPages));}// next page link\npages.push(/*#__PURE__*/_jsx(\"button\",{className:\"buttonPag\",onClick:()=>handlePageClick(currentPage+1),disabled:currentPage===totalPages,children:\"Next\"},\"next\"));return/*#__PURE__*/_jsx(\"div\",{className:\"pagination-container\",children:pages});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-input-container\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"titleNote\",children:editMode?'Your Note':'Write your note here'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:editMode?editSubmit:handleSubmit,className:\"note-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"noteContent\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"noteContent\",name:\"noteContent\",rows:\"10\",cols:\"50\",className:\"input-box-note\",value:noteContent,onChange:e=>setNoteContent(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"note-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"note-save\",type:\"submit\",children:displayButton}),editMode&&/*#__PURE__*/_jsx(\"button\",{className:\"discard-save\",onClick:()=>{setEditMode(false);setNoteContent('');},children:\"Done Viewing\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"allSideBar\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sideBar-button \".concat(toggleButtonContent),onClick:toggleSidebar,children:toggleButtonContent}),isSidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"sidebar\",children:isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Pagination,{totalPages:totalPages,currentPage:currentPage}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-container\",children:sidebarData&&sidebarData.map((note,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"note-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"note-date\",children:note.date}),/*#__PURE__*/_jsx(\"div\",{className:\"note-content\",children:note.content}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"edit\",onClick:()=>{setNoteContent(note.content);setCurrentNoteId(note.id);setEditMode(true);},children:\"View\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"delete\",onClick:e=>deleteRequest(note.id,e),children:\"Delete\"})]},index))})]})})]})]});}","map":{"version":3,"names":["useEffect","useState","axios","useNavigate","handleSessionExpired","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NoteBox","_ref","apiUrl","ITEMS_PER_PAGE","accessToken","localStorage","getItem","isSidebarOpen","setIsSidebarOpen","sidebarData","setSidebarData","isLoading","setIsLoading","noteContent","setNoteContent","editMode","setEditMode","JSON","parse","toggleButtonContent","currentNoteId","setCurrentNoteId","currentPage","setCurrentPage","totalPages","setTotalPages","displayButton","navigate","setItem","stringify","handleSubmit","event","preventDefault","response","post","content","headers","concat","status","fetchData","err","console","log","data","editSubmit","put","pageNumber","arguments","length","undefined","pageNum","_response$data","_response$data2","_response$data3","get","params","page","size","notes","error","toggleSidebar","then","catch","handlePageClick","deleteRequest","noteId","answer","window","confirm","delete","Pagination","_ref2","maxPageNumbersToShow","pages","startPage","Math","max","floor","endPage","min","push","className","onClick","disabled","children","href","e","i","id","onSubmit","htmlFor","name","rows","cols","value","onChange","target","type","map","note","index","date"],"sources":["C:/Users/crina/Documents/projects1/front_nn/app/src/components/NoteBox.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {handleSessionExpired} from \"../utility/SessionExpiryHandler\";\r\n\r\nexport default function NoteBox({apiUrl}) {\r\n\r\n\r\n    const ITEMS_PER_PAGE = \"4\"; //4 notes are fetched per page\r\n    let accessToken = localStorage.getItem('accessToken');\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n    const [sidebarData, setSidebarData] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [noteContent, setNoteContent] = useState(localStorage.getItem(\"noteContent\") || '');\r\n    const [editMode, setEditMode] = useState(JSON.parse(localStorage.getItem(\"editMode\") || \"false\"));\r\n    const toggleButtonContent = isSidebarOpen ? 'X' : 'Get saved notes';\r\n    const [currentNoteId, setCurrentNoteId] = useState(\r\n        JSON.parse(localStorage.getItem(\"currentNoteId\")) || null\r\n    );\r\n    //for pagiation\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const displayButton = editMode ? 'Save Changes' : 'Save';\r\n    const navigate = useNavigate();\r\n\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(\"noteContent\", noteContent);\r\n    }, [noteContent]);\r\n\r\n\r\n    useEffect(() => {\r\n        // Save editMode to localStorage as a string\r\n        localStorage.setItem(\"editMode\", JSON.stringify(editMode));\r\n    }, [editMode]);\r\n\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(\"currentNoteId\", JSON.stringify(currentNoteId));\r\n    }, [currentNoteId]);\r\n\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n            const response = await axios.post(apiUrl + \"/note\", {\r\n                content: noteContent\r\n            }, {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${accessToken}`\r\n                }\r\n            });\r\n            setNoteContent(\"\");\r\n            if (response.status === 200 && isSidebarOpen) {\r\n                await fetchData(currentPage);\r\n            }\r\n\r\n        } catch (err) {\r\n            if (!err?.response) {\r\n                console.log(\"No Server Response\");\r\n            } else if (err?.response.status === 401) {\r\n                console.log(\"Error message: \", err.response.data);\r\n                handleSessionExpired(navigate); // Handle session expiry\r\n            } else if (err?.response.status === 403) {\r\n                console.log(\"Bad request\");\r\n            } else {\r\n                console.log(\"Failed to access source\")\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const editSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n            const response = await axios.put(apiUrl + \"/note/api/\" + currentNoteId, noteContent, {\r\n                headers: {\r\n                    'Content-Type': 'text/plain',\r\n                    'Authorization': `Bearer ${accessToken}`\r\n                }\r\n            });\r\n            setNoteContent(\"\");\r\n            setEditMode(false);\r\n            if (response.status === 200) {\r\n                await fetchData(currentPage);\r\n            }\r\n        } catch (err) {\r\n            if (!err?.response) {\r\n                console.log(\"No Server Response\");\r\n            } else if (err?.response.status === 401) {\r\n                console.log(\"Error message: \", err.response.data);\r\n                handleSessionExpired(navigate); // Handle session expiry\r\n            } else if (err?.response.status === 403) {\r\n                console.log(\"Bad request\");\r\n            } else {\r\n                console.log(\"Failed to access source\")\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const fetchData = async (pageNumber = 1) => {\r\n        const pageNum = pageNumber - 1;\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await axios.get(apiUrl + \"/note\", {\r\n                params: {\r\n                    page: pageNum,\r\n                    size: ITEMS_PER_PAGE\r\n                },\r\n                headers: {\r\n                    'Authorization': `Bearer ${accessToken}`\r\n                }\r\n            });\r\n            setSidebarData(response.data?.notes);\r\n            setTotalPages(response.data?.totalPages);\r\n            setCurrentPage(response.data?.currentPage + 1);\r\n            setIsLoading(false);\r\n        } catch (error) {\r\n            if (error?.response.status === 401) {\r\n                console.log(\"Error message: \", error.response.data);\r\n                handleSessionExpired(navigate); // Handle session expiry\r\n            } else {\r\n                console.error('Error fetching data:', error);\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    //upon page load get the auth token\r\n    useEffect(() => {\r\n        accessToken = localStorage.getItem('accessToken');\r\n\r\n    }, []);\r\n\r\n    const toggleSidebar = () => {\r\n        setIsSidebarOpen(!isSidebarOpen);\r\n        if (!isSidebarOpen) {\r\n            setCurrentPage(1);\r\n            fetchData().then(() => {\r\n                console.log(\"Data fetched successfully after toggling sidebar.\");\r\n            }).catch(error => {\r\n                console.error(\"Error fetching data:\", error);\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    const handlePageClick = (pageNumber) => {\r\n        setCurrentPage(pageNumber);\r\n        fetchData(pageNumber).then(() => {\r\n            console.log(\"Data fetched successfully for page:\", pageNumber);\r\n        }).catch(error => {\r\n            console.error(\"Error fetching data for page:\", pageNumber, error);\r\n        });\r\n    };\r\n\r\n\r\n    const deleteRequest = async (noteId, event) => {\r\n        let answer = window.confirm(\"Are you sure you want to delete the note?\")\r\n        if (answer) {\r\n            event.preventDefault();\r\n            try {\r\n                const response = await axios.delete(apiUrl + \"/note/\" + noteId, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${accessToken}`\r\n                    },\r\n                });\r\n                if (response.status === 200) {\r\n                    await fetchData(currentPage);\r\n                }\r\n            } catch (err) {\r\n                if (!err?.response) {\r\n                    console.log(\"No Server Response\");\r\n                } else if (err?.response.status === 404) {\r\n                    console.log(\"Error message: \", err.response.data);\r\n                    handleSessionExpired(navigate); // Handle session expiry\r\n                } else if (err?.response.status === 403) {\r\n                    console.log(\"Bad request\");\r\n                } else {\r\n                    console.log(\"Failed to access source\")\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Pagination Component\r\n    const Pagination = ({totalPages, currentPage}) => {\r\n        const maxPageNumbersToShow = 3;\r\n        const pages = [];\r\n        // calculate the range of page numbers to show\r\n        let startPage = Math.max(1, currentPage - Math.floor(maxPageNumbersToShow / 2));\r\n        let endPage = Math.min(totalPages, startPage + maxPageNumbersToShow - 1);\r\n\r\n        // adjust the start page  at the end of the range\r\n        if (endPage === totalPages) {\r\n            startPage = Math.max(1, endPage - maxPageNumbersToShow + 1);\r\n        }\r\n\r\n        // previous page link\r\n        pages.push(\r\n            <button key=\"prev\" className=\"buttonPag\" onClick={() =>\r\n                handlePageClick(currentPage - 1)} disabled={currentPage === 1}>\r\n                Previous\r\n            </button>\r\n        );\r\n\r\n        // first page link\r\n        if (startPage > 1) {\r\n            pages.push(\r\n                <a href=\"#\" key={1} onClick={(e) => {\r\n                    e.preventDefault();\r\n                    handlePageClick(1);\r\n                }}>\r\n                    1\r\n                </a>\r\n            );\r\n            if (startPage > 2) pages.push(<span key=\"startEllipsis\">...</span>);\r\n        }\r\n\r\n        // page number links\r\n        for (let i = startPage; i <= endPage; i++) {\r\n            pages.push(\r\n                <a\r\n                    href=\"#\"\r\n                    key={i}\r\n                    className={`pagination-link ${i === currentPage ? 'active' : ''}`}\r\n                    onClick={(e) => {\r\n                        e.preventDefault();\r\n                        handlePageClick(i);\r\n                    }}\r\n                    aria-current={i === currentPage ? 'page' : undefined}\r\n                    aria-disabled={i === currentPage ? 'true' : 'false'}\r\n                >\r\n                    {i}\r\n                </a>\r\n            );\r\n        }\r\n\r\n        // last page link\r\n        if (endPage < totalPages) {\r\n            if (endPage < totalPages - 1) pages.push(<span key=\"endEllipsis\">...</span>);\r\n            pages.push(\r\n                <a href=\"#\" key={totalPages} onClick={(e) => {\r\n                    e.preventDefault();\r\n                    handlePageClick(totalPages);\r\n                }}>\r\n                    {totalPages}\r\n                </a>\r\n            );\r\n        }\r\n\r\n        // next page link\r\n        pages.push(\r\n            <button key=\"next\" className=\"buttonPag\" onClick={() => handlePageClick(currentPage + 1)}\r\n                    disabled={currentPage === totalPages}>\r\n                Next\r\n            </button>\r\n        );\r\n\r\n        return <div className=\"pagination-container\">{pages}</div>;\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"container-note\">\r\n            <div className='note-input-container'>\r\n                <h1 id=\"titleNote\">{editMode ? 'Your Note' : 'Write your note here'}</h1>\r\n                <form onSubmit={editMode ? editSubmit : handleSubmit} className=\"note-form\">\r\n                    <label htmlFor=\"noteContent\"></label>\r\n                    <textarea id=\"noteContent\" name=\"noteContent\" rows=\"10\" cols=\"50\"\r\n                              className=\"input-box-note\" value={noteContent}\r\n                              onChange={(e) => setNoteContent(e.target.value)}/>\r\n                    <div className=\"note-buttons\">\r\n                        <button className=\"note-save\" type=\"submit\">{displayButton}</button>\r\n                        {editMode && (\r\n                            <button className=\"discard-save\" onClick={() => {\r\n                                setEditMode(false);\r\n                                setNoteContent('')\r\n                            }}>Done Viewing</button>\r\n                        )}\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div className=\"allSideBar\">\r\n                <button className={`sideBar-button ${toggleButtonContent}`}\r\n                        onClick={toggleSidebar}>{toggleButtonContent}</button>\r\n                {isSidebarOpen && (\r\n                    <div className=\"sidebar\">\r\n                        {isLoading ? (\r\n                            <p>Loading...</p>\r\n                        ) : (\r\n                            <>\r\n\r\n                                <Pagination totalPages={totalPages} currentPage={currentPage}/>\r\n\r\n                                <div className=\"notes-container\">\r\n                                    {sidebarData && sidebarData.map((note, index) => (\r\n                                        <div className=\"note-item\" key={index}>\r\n                                            <div className=\"note-date\">{note.date}</div>\r\n                                            <div className=\"note-content\">{note.content}</div>\r\n                                            <a href=\"#\" className=\"edit\" onClick={() => {\r\n                                                setNoteContent(note.content);\r\n                                                setCurrentNoteId(note.id);\r\n                                                setEditMode(true);\r\n                                            }}>View</a>\r\n                                            <a href=\"#\" className=\"delete\" onClick={(e) =>\r\n                                                deleteRequest(note.id, e)}>Delete</a>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}